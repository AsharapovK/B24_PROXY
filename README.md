![Node.js](https://img.shields.io/badge/Node.js-v18+-green) ![Express](https://img.shields.io/badge/Express-v4.x-blue) ![Swagger](https://img.shields.io/badge/Swagger-OpenAPI-85EA2D) ![License](https://img.shields.io/badge/License-MIT-yellow)

# B24 Proxy

ะัะพะบัะธ-ัะตัะฒะตั ะดะปั ะพะฑัะฐะฑะพัะบะธ ะธ ะผะฐัััััะธะทะฐัะธะธ ะทะฐะฟัะพัะพะฒ ั ะธะฝัะตะณัะฐัะธะตะน ะฒ Bitrix24. ะฃะฟัะฐะฒะปัะตั ะพัะตัะตะดัั, ะปะพะณะธัะพะฒะฐะฝะธะตะผ ะธ ะทะฐัะธัะพะน ะพั ะฟะตัะตะณััะทะบะธ API.

---

## ๐ ะัััััะน ััะฐัั

```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
 git clone https://github.com/yourusername/b24-queue-proxy.git
 cd b24-queue-proxy

# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
npm install

# ะะฐะฟัััะธัะต ัะตัะฒะตั ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
npm run dev

# ะะปั ะฟัะพะดะฐะบัะตะฝะฐ
npm start
```

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

ะัะต ะฟะฐัะฐะผะตััั ัะตัะฒะตัะฐ ะฝะฐัััะฐะธะฒะฐัััั ัะตัะตะท ัะฐะนะป `config/proxy-config.cjs`.

ะัะธะผะตั ะบะปััะตะฒัั ะฟะฐัะฐะผะตััะพะฒ:

```js
module.exports = {
  SERVER_IP: "127.0.0.1",
  PROXY_PORT: 3000,
  TARGET_BASE_URL: "https://script.google.com/macros/s/xxxxxxxxxxxxxxxxxxxxxxx/exec",
  TARGET_BASE_URL_INVOICE: "https://script.google.com/macros/s/xxxxxxxxxxxxxxxxxxxxxxx/exec",
  REQUEST_TIMEOUT: 360000,
  MAX_RETRIES: 3,
  MAX_CONCURRENCY: 1,
};
```

ะะปั ะฝะฐัััะพะนะบะธ ะฟัะพะบัะธ ะฒะพ ััะพะฝัะตะฝะดะต ะธัะฟะพะปัะทัะนัะต ัะฐะนะป `vite.config.js`:

```js
server: {
  proxy: {
    "/api": {
      target: "http://localhost:3000",
      changeOrigin: true,
      ws: true,
    },
  },
},
```

---

## ๐ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

- ะัะตัะตะดั ะทะฐะฟัะพัะพะฒ ั ะพะณัะฐะฝะธัะตะฝะธะตะผ ัะบะพัะพััะธ (p-queue)
- ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฒัะพัั ะฟัะธ ะพัะธะฑะบะฐั
- ะะพะดัะพะฑะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต (winston)
- ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะปะพะณะพะฒ (`/logs`)
- ะะพะบัะผะตะฝัะฐัะธั API ัะตัะตะท Swagger UI (`/api-docs`)
- ะะธะฑะบะฐั ะบะพะฝัะธะณััะฐัะธั ัะตัะตะท ัะฐะนะปั ะบะพะฝัะธะณััะฐัะธะธ
- ะะพะฝะธัะพัะธะฝะณ ะพัะตัะตะดะธ ะธ ััะฐัะธััะธะบะธ

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ  Bitrix24   โโโโโถโ  ะัะพะบัะธ-ัะตัะฒะตั โโโโโถโ  ะฆะตะปะตะฒะพะต API    โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                        โ
                        โผ
                โโโโโโโโโโโโโโโโโ
                โ  ะัะตัะตะดั     โ
                โ  (p-queue)   โ
                โโโโโโโโโโโโโโโโโ
                        โ
                        โผ
                โโโโโโโโโโโโโโโโโ
                โ  ะะพะณะธัะพะฒะฐะฝะธะต  โ
                โ  (winston)    โ
                โโโโโโโโโโโโโโโโโ
```

---

## ๐ API ะะพะบัะผะตะฝัะฐัะธั

Swagger UI: [http://localhost:3000/api-docs](http://localhost:3000/api-docs)

### ะัะธะผะตัั ัะฝะดะฟะพะธะฝัะพะฒ

- **ะะพะฑะฐะฒะธัั ะทะฐะฟัะพั ะฒ ะพัะตัะตะดั**
  ```http
  POST /proxy?DealID=123&param1=value1
  ```
- **ะกัะฐัะธััะธะบะฐ ะพัะตัะตะดะธ**
  ```http
  GET /api/queue
  ```
- **ะัะพัะผะพัั ะปะพะณะพะฒ**
  ```http
  GET /api/logs
  ```

---

## ๐ ะะฐะฟััะบ

```bash
npm install
npm run dev
```

- ะกะตัะฒะตั: http://localhost:3000
- ะคัะพะฝัะตะฝะด: http://localhost:5173

---

## ๐ ะะธัะตะฝะทะธั

MIT

---

**ะะฒัะพั:** Asharapov Kirill  
**ะะตััะธั:** 1.0.0  
**ะะฐัะฐ:** 2025-06-05
